/**
* jQuery creaseFont plugin
* Version 1.0.4
* Increase or Decrase the Fontsize of a whole Website or only some containers
* Remember: 100% = 1em = 16px
* Remember2: my english could be better
* 
* You can call a function after the font is in or decreased:
* after:function( obj ) { }
* the obj contains the following:
*     obj.currSize    ->  the current fontsize, int or float
*     obj.currUnit    ->  the current unit, string
*     obj.currContent ->  the current content, which is in or decreased, string
*     obj.currTask    ->  the current action which has been called, (increaseFont|defaultFont|decreaseFont), string
*     obj.currLvl     ->  the current lvl, an empty string or (max|default|min),
*                         max = maximun zoomlvl arrived
*                         default = default zoom lvl
*                         min = minimum zoom lvl arrived
* 
* Copyright (c) 2011 Nico Renken (blog.mxtracks.de)
* Licensed under Creativ Commons Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0):
* http://creativecommons.org/licenses/by-sa/3.0/
*
*/
(function($){$.creaseFont=function(options){var settings={content:"body",defaultSize:100,maxSize:160,minSize:60,stepSize:10,unit:"%",bFontLarge:"#fontLarge",bFontDefault:"#fontDefault",bFontSmall:"#fontSmall",bFontReset:"#fontReset",animate:true,animateSpeed:500,cookieName:"creaseFont",cookiePath:"/",cookieLifetime:60,ondecrease:$.noop,onincrease:$.noop,onreset:$.noop,ondefault:$.noop,},opt=$.extend(true,settings,options),currentSize=opt.defaultSize,currLvl="",version="1.0.4",newsize;$(opt.bFontLarge).click(function(){increaseFont();return false});$(opt.bFontDefault).click(function(){defaultFont();return false});$(opt.bFontSmall).click(function(){decreaseFont();return false});$(opt.bFontReset).click(function(){resetFont();return false});if(mycookie(opt.cookieName)){newsize=mycookie(opt.cookieName);newsize=parseInt(newsize,10);if(newsize!==0){currentSize=newsize<opt.minSize?opt.minSize:newsize;var animateState=opt.animate;opt.animate=false;sizeIT(opt.content,currentSize);opt.animate=animateState}}function increaseFont(){if(currentSize===0){currentSize=opt.defaultSize}currentSize=currentSize+opt.stepSize;if(currentSize>=opt.maxSize){currentSize=opt.maxSize;currLvl="max"}else{currLvl=""}sizeIT(opt.content,currentSize);mycookie(opt.cookieName,currentSize,{path:opt.cookiePath,expires:opt.cookieLifetime});var objects={currSize:currentSize,currUnit:opt.unit,currContent:opt.content,currTask:"increaseFont",currLvl:currLvl};if($.isFunction(opt.after)){if(opt.animate){setTimeout(function(){opt.after(objects)},opt.animateSpeed+100)}else{opt.after(objects)}}trigger("increase")}function defaultFont(){currentSize=opt.defaultSize;currLvl="default";sizeIT(opt.content,currentSize);mycookie(opt.cookieName,currentSize,{path:opt.cookiePath,expires:-100});var objects={currSize:currentSize,currUnit:opt.unit,currContent:opt.content,currTask:"defaultFont",currLvl:currLvl};if($.isFunction(opt.after)){if(opt.animate){setTimeout(function(){opt.after(objects)},opt.animateSpeed+100)}else{opt.after(objects)}}trigger("default")}function resetFont(){currentSize=0;currLvl="original";sizeIT(opt.content,currentSize);mycookie(opt.cookieName,currentSize,{path:opt.cookiePath,expires:-100});var objects={currSize:currentSize,currUnit:opt.unit,currContent:opt.content,currTask:"resetFont",currLvl:currLvl};if($.isFunction(opt.after)){if(opt.animate){setTimeout(function(){opt.after(objects)},opt.animateSpeed+100)}else{opt.after(objects)}}trigger("reset")}function decreaseFont(){if(currentSize===0){currentSize=opt.defaultSize}currentSize=currentSize-opt.stepSize;if(currentSize<=opt.minSize){currentSize=opt.minSize;currLvl="min"}else{currLvl=""}sizeIT(opt.content,currentSize);mycookie(opt.cookieName,currentSize,{path:opt.cookiePath,expires:opt.cookieLifetime});var objects={currSize:currentSize,currUnit:opt.unit,currContent:opt.content,currTask:"decreaseFont",currLvl:currLvl};if($.isFunction(opt.after)){if(opt.animate){setTimeout(function(){opt.after(objects)},opt.animateSpeed+100)}else{opt.after(objects)}}trigger("decrease")}function sizeIT(cn,sz){if(typeof(cn)==="object"&&(cn instanceof Array)){$.each(cn,function(index,value){setFontSize(value,sz)})}else{setFontSize(cn,sz)}}function setFontSize(selector,size){if(opt.animate&&size!==0){$(selector).animate({"font-size":size+opt.unit},opt.animateSpeed)}else{$(selector).css("font-size",size===0?"":size+opt.unit)}}function getPercentSize(where){return parseInt($(where).css("font-size").substr(0,$(where).css("font-size").length-2)*6.25,10)}function mycookie(key,value,cookieOptions){if(key.trim().length===0){return null}if(arguments.length>1&&String(value)!=="[object Object]"){var cOptions=$.extend({},cookieOptions);if(value===null||value===undefined){cOptions.expires=-1000}if(typeof cOptions.expires==="number"){var days=cOptions.expires,t=cOptions.expires=new Date();t.setDate(t.getDate()+days)}value=String(value);return(document.cookie=[encodeURIComponent(key),"=",cOptions.raw?value:encodeURIComponent(value),cOptions.expires?"; expires="+cOptions.expires.toUTCString():"",cOptions.path?"; path="+cOptions.path:"",cOptions.domain?"; domain="+cOptions.domain:"",cOptions.secure?"; secure":""].join(""))}var cOptions=value||{};var result,decode=cOptions.raw?function(s){return s}:decodeURIComponent;return(result=new RegExp("(?:^|; )"+encodeURIComponent(key)+"=([^;]*)").exec(document.cookie))?decode(result[1]):null}function trigger(name){var eventName="on"+name;if(opt[eventName]!==undefined&&$.isFunction(opt[eventName])){opt[eventName]()}}}})(jQuery);